---
layout: post
title: OSI参考模型与TCP/IP模型
key: 2017-12-04
tags: osi
categories: mdcn
date: 2017-12-04 10:37:12
modify_date: 2017-12-04 16:45:26
---

## OSI模型

| 层    | 名称           | 中文名称  | PDU     | Function/功能                             | 协议                 |
| ---- | ------------ | ----- | ------- | --------------------------------------- | ------------------ |
| 7    | Application  | 应用层   | Data    | 提供应用服务                                  | FTP、NFS            |
| 6    | Presentation | 表示层   | Data    | 数据格式的转换、数据的加密/解密                        | telnet、SNMP、rlogin |
| 5    | Session      | 会话层   | Data    | 建立、管理、终止应用会话                            | SMTP、DNS           |
| 4    | Transport    | 传输层   | Segment | 建立端到端的通讯连接、提供可靠的和不可靠的传输服务、提供面向连接和无连接的服务 | TCP、UDP            |
| 3    | Network      | 网络层   | Packet  | 提供逻辑地址、定义路径、路径选择（路由）                    | IP、ICMP、ARP        |
| 2    | Data Link    | 数据链路层 | Frame   | 数据封装、差错校验、                              | Ethernet、PPP       |
| 1    | Physical     | 物理层   | Bit     | 连接器类型、媒介类型、信号类型                         | IEEE802.11         |

> 数据链路层分2个子层：
> LLC：Logical Link Control Sublayer
> MAC：Media Access Control

PDU：Protocol Data Unit

[![图解OSI模型](../assets/images/osi-network-model/osi.gif)](../assets/images/osi-network-model/osi.gif)  
[查看原图](../assets/images/osi-network-model/osi.gif)

## TCP/IP协议栈

| 层              | 对应的OSI模型层级 |
| -------------- | ---------- |
| Application    | OSI 7/6/5  |
| Transport      | OSI 4      |
| Internet       | OSI 3      |
| Network Access | OSI 2/1    |

## IP计算

32 Bits	8 Bits为一组 

> 转化成10进制，就是点分十进制 xxx.xxx.xxx.xxx

```
00000000 --- 0
11111111 --- 255
```

### IP地址分类

| 类    | 第一个二进制八位组                 | 对应十进制范围    |
| ---- | ------------------------- | ---------- |
| A    | `0`0000001 --- `0`1111110 | 001 -- 126 |
| B    | `10`000000 --- `10`111111 | 128 -- 191 |
| C    | `110`00000 --- `110`11111 | 192 -- 223 |
| D    | `1110`0000 --- `1110`1111 | 224 -- 239 |
| E    | `1111`0000 --- `1111`1110 | 240 -- 254 |

排除：

~~~
  0: 0.0.0.0 网络地址
127: 127.0.0.1 环回地址
255: 255.255.255.255 全网广播地址（路由器无法转发）
     172.16.255.255 定向广播地址（路由器可以转发）
~~~

A、B、C类地址可以配置在电脑上使用。D类地址为组播地址。E类地址为实验地址(未分配)  
能使用的A、B、C类地址分为公网和私网地址(约定俗成)

### 私有地址

A: 10.0.0.0 -- 10.255.255.255  
B: 172.16.0.0 -- 172.31.255.255  
C: 192.168.0.0 -- 192.168.255.255  

### IP地址的组成

网络位 + 主机位  
网络位： 主机所在的广播域的号码  
主机位： 标示主机的号码  

> 不同广播域的计算机不能相互通信

| 类    | 组成      | 掩码            |
| ---- | ------- | ------------- |
| A    | 网.主.主.主 | 255.0.0.0     |
| B    | 网.网.主.主 | 255.255.0.0   |
| C    | 网.网.网.主 | 255.255.255.0 |

掩码：帮助计算机计算广播域号码的参数。

### 掩码的计算

> 可用的主机地址数量 = 地址总数 - 2  
>
> 10.8.0.0/13  
> 10.8.0.0/(8+5)  
> 10.8.0.0/(8+8-3)  
> 10.8.0.0 255.(256-2^3).0.0  
> 10.8.0.0 255.248.0.0  
> **10.11111**000.00000000.00000000  

### 变长子网划分

练习：

172.16.0.0/16 划分30个子网。最后一个子网再划分8个变长子网，问前三个变长子网的子网号？变长子网掩码？可用主机数量？

> 2^5 - 2 = 32 - 2 >= 30  => 需要用16位主机位的5位
> **172.16.00000**000.00000000
> 第一个子网： **172.16.8**.0/21 （**172.16.00001**000.0）-- 172.16.15.255 （**172.16.00001**111.1）
> 最后一个子网： **172.16.240**.0/21 （**172.16.11110**000.0）-- 172.16.247.255 （**172.16.11110**111.1）
>
> 继续划分8个变成子网： 
> 2^4 -2 = 16 -2 >= 8 => 需要用11位主机位的4位 
> **172.16.11110000.1**0000000
> 第一个： 172.16.240.128 -- 172.16.240.255
>   （**172.16.11110000.1**0000000 -- **172.16.11110000.1**1111111）
>
> 第二个： 172.16.241.0 -- 172.16.241.127
>   （**172.16.11110001.0**0000000 -- **172.16.11110001.0**1111111）
>
> 第三个： 172.16.241.128 -- 172.16.241.255
>   （**172.16.11110001.1**0000000 -- **172.16.11110001.1**1111111）



### DHCP

> IP自动获取

### Three-Way-Handshake

> 三次握手

### ARP

> 已知IP，获取MAC
